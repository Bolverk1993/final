import './polyfills.server.mjs';
import{a as E}from"./chunk-5W73NHFV.mjs";import{a as I}from"./chunk-XVWHNISF.mjs";import{$ as s,D as O,E as r,H as p,Ia as w,R as d,T as M,U as S,V as o,W as n,X as m,Y as f,Z as P,_ as a,aa as v,h as _,l as c,za as y}from"./chunk-RDXIUNM2.mjs";import"./chunk-X2SEQXRR.mjs";var h=class l{titulo="";valor=0;static \u0275fac=function(t){return new(t||l)};static \u0275cmp=p({type:l,selectors:[["app-card"]],inputs:{titulo:"titulo",valor:"valor"},decls:8,vars:2,consts:[["id","card-box",1,"shadow","border","border-black","p-3"],[1,"titulo"],["id","alinhamento-div"],[1,"valor"],[1,"unidades"]],template:function(t,e){t&1&&(o(0,"div",0)(1,"h2",1),a(2),n(),o(3,"div",2)(4,"p",3),a(5),n(),o(6,"p",4),a(7,"unidades"),n()()()),t&2&&(r(2),s(e.titulo),r(3),v("",e.valor," "))},styles:["#card-box[_ngcontent-%COMP%]{max-width:150px;max-height:200px}.titulo[_ngcontent-%COMP%]{display:flex;border:2px solid gray;padding:10px;font-size:20px;font-weight:700;min-height:80px;justify-content:center;align-items:center;justify-items:center;margin:auto}#alinhamento-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.valor[_ngcontent-%COMP%]{padding-top:5px;color:#1b357e;font-size:25px;font-weight:700;margin-bottom:0}.unidades[_ngcontent-%COMP%]{color:gray;font-size:20px}"]})};var g=class l{http=c(w);getVeiculos(){return this.http.get("http://localhost:3001/vehicles")}getVinInfos(i){return this.http.post("http://localhost:3001/vehicleData",{vin:i})}static \u0275fac=function(t){return new(t||l)};static \u0275prov=_({token:l,factory:l.\u0275fac,providedIn:"root"})};var b=class l{vin="";odometro=0;nivelCombustivel=0;status="";lat=0;long=0;dashboardService=c(g);onEditVin(i){let t=i.target.value;console.log("Novo VIN:",t),this.dashboardService.getVinInfos(t).subscribe({error:e=>{console.error("Erro ao buscar informa\xE7\xF5es:",e)},next:e=>{this.odometro=e.odometro,this.nivelCombustivel=e.nivelCombustivel,this.status=e.status,this.lat=e.lat,this.long=e.long}})}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=p({type:l,selectors:[["app-car-table"]],inputs:{vin:"vin",odometro:"odometro",nivelCombustivel:"nivelCombustivel",status:"status",lat:"lat",long:"long"},decls:29,vars:6,consts:[[1,"tabela-vin"],[1,"p-3"],[1,"d-flex"],["type","text","placeholder","Digite o Vin desejado",1,"w-100","align-self-center",3,"input","value"]],template:function(t,e){t&1&&(o(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),a(4,"VIN"),n(),o(5,"th",1),a(6,"ODOMETRO"),n(),o(7,"th",1),a(8,"N\xCDVEL DO COMBUSTIVEL"),n(),o(9,"th",1),a(10,"STATUS"),n(),o(11,"th",1),a(12,"LAT"),n(),o(13,"th",1),a(14,"LONG"),n()()(),o(15,"tbody")(16,"tr")(17,"td",2)(18,"input",3),f("input",function(x){return e.onEditVin(x)}),n()(),o(19,"td",1),a(20),n(),o(21,"td",1),a(22),n(),o(23,"td",1),a(24),n(),o(25,"td",1),a(26),n(),o(27,"td",1),a(28),n()()()()),t&2&&(r(18),d("value",e.vin),r(2),v("",e.odometro,"km"),r(2),v("",e.nivelCombustivel,"%"),r(2),s(e.status),r(2),s(e.lat),r(2),s(e.long))},dependencies:[y],styles:[".table-container[_ngcontent-%COMP%]{width:100%;padding:0 20px;box-sizing:border-box;overflow-x:auto}.tabela-vin[_ngcontent-%COMP%]{width:100%;margin:0 auto;border:2px solid #1b357e;border-collapse:collapse;font-size:12px;box-shadow:0 2px 5px #0000001a}thead[_ngcontent-%COMP%]{background-color:#1b357e;color:#fff}tbody[_ngcontent-%COMP%]{font-size:16px;background-color:#fff}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;height:50px;border:1px solid #ddd;padding:10px}td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px;box-sizing:border-box;border:1px solid #ccc;border-radius:4px}@media (max-width: 768px){.tabela-vin[_ngcontent-%COMP%]{font-size:.9rem}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px 5px}}"]})};var T=(l,i)=>i.id;function z(l,i){if(l&1&&(o(0,"option",5),a(1),n()),l&2){let t=i.$implicit;P("value",t.id),r(),s(t.vehicle)}}var D=class l{dashboardService=c(g);veiculos=[];veiculoSelecionado={id:-1,connected:0,volumetotal:0,softwareUpdates:0,vehicle:"",img:"",vin:""};vinInfos={id:-1,lat:0,long:0,nivelCombustivel:0,odometro:0,status:""};ngOnInit(){this.dashboardService.getVeiculos().subscribe({error:()=>{},next:i=>{this.veiculos=Object.values(i),this.veiculoSelecionado=i[0],this.dashboardService.getVinInfos(this.veiculoSelecionado.vin).subscribe({error:()=>{},next:t=>{this.vinInfos=t}})}})}onChangeSelect(i){let t=Number(i.target.value),e=this.veiculos.find(u=>u.id===t);e&&(this.veiculoSelecionado=e),this.dashboardService.getVinInfos(this.veiculoSelecionado.vin).subscribe({error:()=>{},next:u=>{this.vinInfos=u}})}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=p({type:l,selectors:[["app-dashboard"]],decls:18,vars:14,consts:[["id","dashboard-div"],["id","parte-cima"],[1,"cartoes"],["id","card-veiculos",1,"shadow","border","border-black","p-3"],[3,"change"],[3,"value"],[3,"titulo","valor"],["id","carros-img"],[3,"src","alt"],[1,"table-container"],[3,"vin","lat","long","nivelCombustivel","odometro","status"]],template:function(t,e){t&1&&(m(0,"app-header"),o(1,"div",0)(2,"div",1)(3,"section",2)(4,"div",3)(5,"h2"),a(6,"Ve\xEDculos"),n(),o(7,"select",4),f("change",function(x){return e.onChangeSelect(x)}),M(8,z,2,2,"option",5,T),n()(),m(10,"app-card",6)(11,"app-card",6)(12,"app-card",6),n()(),o(13,"section",7),m(14,"img",8),n(),o(15,"section",9),m(16,"app-car-table",10),n(),m(17,"app-footer"),n()),t&2&&(r(8),S(e.veiculos),r(2),d("titulo","Total de Vendas")("valor",e.veiculoSelecionado.volumetotal),r(),d("titulo","Conectados")("valor",e.veiculoSelecionado.connected),r(),d("titulo","Update Software")("valor",e.veiculoSelecionado.softwareUpdates),r(2),d("src",e.veiculoSelecionado.img,O)("alt",e.veiculoSelecionado.vehicle),r(2),d("vin",e.veiculoSelecionado.vin)("lat",e.vinInfos.lat)("long",e.vinInfos.long)("nivelCombustivel",e.vinInfos.nivelCombustivel)("odometro",e.vinInfos.odometro)("status",e.vinInfos.status))},dependencies:[h,b,E,I],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;height:100%}#dashboard-div[_ngcontent-%COMP%]{min-width:100vw;min-height:100vh;display:flex;flex-direction:column;box-sizing:border-box;background-color:#f5f5f5;overflow:hidden}#parte-cima[_ngcontent-%COMP%]{display:flex}.cartoes[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:20px;padding:10px;margin:0;flex:1;max-height:250px;background-color:#fff}#card-veiculos[_ngcontent-%COMP%], app-card[_ngcontent-%COMP%]{margin-inline-end:100px;margin-inline-start:100px;flex:1;max-width:150px;max-height:200px;transition:transform .3s ease}#card-veiculos[_ngcontent-%COMP%]:hover, app-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}#card-veiculos[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{border:2px solid gray;background-color:#fff;font-size:20px}#carros-img[_ngcontent-%COMP%]{width:100%;padding:10px;text-align:center;background-color:#fff;box-shadow:0 2px 5px #0000001a}#carros-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:300px;width:auto;object-fit:contain}h2[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px;font-size:1.5rem;font-weight:700;min-height:70px;display:flex;justify-content:center;align-items:center;margin:0;background-color:#f8f9fa}.table-container[_ngcontent-%COMP%]{width:100vw;padding-bottom:80px}app-car-table[_ngcontent-%COMP%]{width:100%}select[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:1rem;font-weight:700;border:1px solid #1b357e;color:#1b357e;border-radius:4px;margin-top:10px;background-color:#fff}@media (max-width: 768px){#dashboard-div[_ngcontent-%COMP%]{padding-top:60px}.cartoes[_ngcontent-%COMP%]{flex-direction:column;align-items:center;overflow-y:auto}#card-veiculos[_ngcontent-%COMP%], app-card[_ngcontent-%COMP%]{width:100%;max-width:100%}#carros-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:120px}h2[_ngcontent-%COMP%]{font-size:1.2rem;min-height:60px}}"]})};export{D as DashboardComponent};
